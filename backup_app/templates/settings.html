{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings ‚Äì Backup Manager</title>
    <link rel="stylesheet" href="{% static 'css/settings.css' %}" />
  </head>

  <body>
    <div class="app">
      <!-- header -->
      <header class="header">
        <h1 class="brand">Backup Manager</h1>
        <div class="header-actions">
          <button class="icon-btn">üåô</button>
          <a class="login-btn" href="{% url 'login' %}">Log in</a>
        </div>
      </header>

      <div class="layout">
        <!-- sidebar -->
        <nav class="sidebar">
          <a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a>
          <a class="nav-link" href="{% url 'create_backup' %}">Create Backup</a>
          <a class="nav-link" href="{% url 'history' %}">History</a>
          <a class="nav-link active">Settings</a>
        </nav>
        <!-- main content -->
        <main class="content">
          <div class="content-header">
            <h2>Settings</h2>
          </div>

          <div class="settings-row">
            <section class="settings-card card">
              <h3>Backup Configuration</h3>

              <label for="frequency">Backup Frequency</label>
              <select id="frequency" class="input">
                <option>Daily</option>
                <option>Weekly</option>
                <option>Monthly</option>
              </select>

              <label class="toggle-label">
                <div class="toggle-switch" id="autoWrap">
                  <input type="checkbox" id="auto-backup" checked />
                  <span class="knob"></span>
                </div>
                <span class="toggle-text">Enable automatic backups</span>
              </label>

              <label for="admin-email">Admin email</label>
              <input type="email" id="admin-email" value="admin@example.com" />

              <label for="storage-path">Storage path</label>
              <input type="text" id="storage-path" value="/var/backups" />

              <button class="save-btn" id="saveSettings">Save changes</button>
            </section>

            <section class="system-info card">
              <h3>System Info</h3>
              <p><strong>System:</strong> <span class="muted">Windows</span></p>
              <p>
                <strong>Last backup date:</strong>
                <span class="muted">2024-10-09</span>
              </p>
              <p>
                <strong>Next scheduled backup:</strong>
                <span class="muted">2024-10-10</span>
              </p>
            </section>
          </div>
        </main>
      </div>
    </div>

    <script>
      // pod≈õwietlanie aktywnego linku w sidebarze

      // toggle: ustawiam klasƒô .on na wrapperze, ≈ºeby m√≥c zmieniƒá kolor toru
      const autoCheckbox = document.getElementById("auto-backup");
      const autoWrap = document.getElementById("autoWrap");

      function updateToggle() {
        if (autoCheckbox.checked) autoWrap.classList.add("on");
        else autoWrap.classList.remove("on");
      }
      // initial
      updateToggle();
      // listener
      autoCheckbox.addEventListener("change", updateToggle);

      //jak na razie demo save
      document.getElementById("saveSettings").addEventListener("click", () => {
        const data = {
          freq: document.getElementById("frequency").value,
          auto: document.getElementById("auto-backup").checked,
          email: document.getElementById("admin-email").value,
          path: document.getElementById("storage-path").value,
        };
        alert("Zapisujƒô ustawienia:\n" + JSON.stringify(data, null, 2));
        // tu mo≈ºesz dodaƒá fetch() do backendu
      });
    </script>
      <div id="status-success" class="status-overlay">
  <div class="status-card success">
    <div class="icon">‚úÖ</div>

    <h2>Operacja zako≈Ñczona sukcesem</h2>
    <p>Operacja zosta≈Ça wykonana poprawnie.</p>

    <button class="btn-primary" onclick="hideStatus()">Powr√≥t</button>
  </div>
  </div>

  <div id="status-error" class="status-overlay">
  <div class="status-card error">
    <div class="icon">‚ùå</div>

    <h2>Operacja zako≈Ñczona niepowodzeniem</h2>
    <p>WystƒÖpi≈Ç b≈ÇƒÖd podczas wykonywania operacji.</p>

    <button class="btn-primary" onclick="hideStatus()">Powr√≥t</button>
  </div>
  </div>
  <script>
  function showSuccess() {
    document.getElementById("status-success").style.display = "flex";
  }

  function showError() {
    document.getElementById("status-error").style.display = "flex";
  }

  function hideStatus() {
    document.getElementById("status-success").style.display = "none";
    document.getElementById("status-error").style.display = "none";
  }
  </script>
  </body>
</html>
